<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link type="text/css" rel="stylesheet" href="/css/CustomStyle.css" />
  </head>
  <body>
    <div style="width: 600px !important; height: 300px !important">
      <canvas id="myChart" width="600" height="300"></canvas>
    </div>

    <script>
      const ctx = document.getElementById("myChart").getContext("2d");
      // Gradient Colors
      var blue_gradient = ctx.createLinearGradient(0, 0, 0, 400);
      blue_gradient.addColorStop(0, "#4472C4");
      blue_gradient.addColorStop(1, "#ffffff");
      var orange_gradient = ctx.createLinearGradient(0, 0, 0, 400);
      orange_gradient.addColorStop(0, "#ED7D31");
      orange_gradient.addColorStop(1, "#ffffff");
      var area_gradient = ctx.createLinearGradient(0, 0, 0, 400);
      area_gradient.addColorStop(0, "#cfe0ff");
      area_gradient.addColorStop(1, "#ffffff");

      // Shadows

      // Chart Creation
      const myChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: ["A", "M", "J", "J", "A", "S", "O", "N", "D", "J", "F"],
          datasets: [
            {
              label: "Tasks",
              data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 62, 21],
              backgroundColor: blue_gradient,
              borderRadius: 50,
              padding: 10,
              padding: 20,
            },
            {
              label: "SLA %",
              data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 51, 57],
              backgroundColor: orange_gradient,
              borderRadius: 50,
              padding: 20,
            },
            {
              type: "line",
              label: "Linear (Tasks)",
              data: [
                7.54, 7.54, 7.54, 7.54, 7.54, 7.54, 7.54, 7.54, 7.54, 7.54,
                7.54,
              ],
              backgroundColor: ["#4472C4"],
              borderColor: ["#4472C4"],
              borderWidth: 2,
              borderDash: [10, 5],
              fill: {
                target: "origin",
                above: area_gradient,
              },
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
          plugins: {
            legend: {
              labels: {
                // This more specific font property overrides the global property
                usePointStyle: "circle",
                boxWidth: 10,
                boxShadow: "#000000",
                font: {
                  size: 14,
                  family: "'Poppins'",
                },
              },
            },
            tooltip: {
              backgroundColor: "#FFF",
              footerFont: {
                size: 14,
                family: "'Poppins'",
              },
              titleColor: "#000",
              bodyFont: {
                size: 14,
                family: "'Poppins'",
              },
              bodyColor: "inherit",
              labelAlign: "center",
              bodyAlign: "center",
              footerAlign: "center",
              bodyAlign: "center",
              displayColors: false,
              yAlign: "bottom",
              xAlign: "center",
              callbacks: {
                title: function () {},
                label: function (context) {
                  let label = context.dataset.label || "";

                  if (label) {
                    label = "<span>" + label + "</span>";
                    label += '<br><hr style="margin: 1px 0;">';
                  }
                  if (context.parsed.y !== null) {
                    label += '<span style="font-size: 25px;font-weight: 600;">' + context.parsed.y + '</span>';
                  }
                  return label;
                },
              },
              // Disable the on-canvas tooltip
              enabled: false,

              external: function (context) {
                // Tooltip Element
                let tooltipEl = document.getElementById("chartjs-tooltip");

                // Create element on first render
                if (!tooltipEl) {
                  tooltipEl = document.createElement("div");
                  tooltipEl.id = "chartjs-tooltip";
                  tooltipEl.setAttribute(
                    "style",
                    "box-shadow: 0 3px 6px rgba(0,0,0,.15); min-width: 63px; background-color: white; border-radius: 6px;font-family: 'Poppins'; padding: .15rem 1rem;"
                  );
                  tooltipEl.innerHTML = '<table style="width: 100%;"></table>';
                  document.body.appendChild(tooltipEl);
                }

                // Hide if no tooltip
                const tooltipModel = context.tooltip;
                if (tooltipModel.opacity === 0) {
                  tooltipEl.style.opacity = 0;
                  return;
                }

                // Set caret Position
                tooltipEl.classList.remove("above", "below", "no-transform");
                if (tooltipModel.yAlign) {
                  tooltipEl.classList.add(tooltipModel.yAlign);
                } else {
                  tooltipEl.classList.add("no-transform");
                }

                function getBody(bodyItem) {
                  return bodyItem.lines;
                }

                // Set Text
                if (tooltipModel.body) {
                  const titleLines = tooltipModel.title || [];
                  const bodyLines = tooltipModel.body.map(getBody);

                  let innerHtml = "<thead>";

                  titleLines.forEach(function (title) {
                    innerHtml += "<tr><th>" + title + "</th></tr>";
                  });
                  innerHtml += "</thead><tbody>";

                  bodyLines.forEach(function (body, i) {
                    const colors = tooltipModel.labelColors[i];
                    let style = "background:" + colors.backgroundColor;
                    style += "; border-color:" + colors.borderColor;
                    style += "; border-width: 2px";
                    const span = '<span style="' + style + '"></span>';
                    innerHtml += '<tr><td style="text-align:center;">' + span + body + "</td></tr>";
                  });
                  innerHtml += "</tbody>";

                  let tableRoot = tooltipEl.querySelector("table");
                  tableRoot.innerHTML = innerHtml;
                }

                const position = context.chart.canvas.getBoundingClientRect();
                const bodyFont = Chart.helpers.toFont(
                  tooltipModel.options.bodyFont
                );

                // Display, position, and set styles for font
                tooltipEl.style.opacity = 1;
                tooltipEl.style.position = "absolute";
                tooltipEl.style.left =
                  position.left +
                  window.pageXOffset +
                  tooltipModel.caretX +
                  "px";
                tooltipEl.style.top =
                  position.top +
                  window.pageYOffset +
                  tooltipModel.caretY +
                  "px";
                tooltipEl.style.font = bodyFont.string;
                tooltipEl.style.padding =
                  tooltipModel.padding + "px " + tooltipModel.padding + "px";
                tooltipEl.style.pointerEvents = "none";
              },
            },
          },
        },
      });
    </script>
  </body>
</html>
